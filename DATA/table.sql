CREATE TABLE [dbo].[CHITIETDONHANG](
	[MADH] nvarchar(10) NOT NULL,
	[MASP] nvarchar(10) NOT NULL,
	[SL] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[MASP] ASC,
	[MADH] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[CHITIETGIOHANG](
	[MASP] nvarchar(10) NOT NULL,
	[MAND] nvarchar(10) NOT NULL,
	[SOLUONG] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[MASP] ASC,
	[MAND] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[DANHGIA](
	[MASP] nvarchar(10) NOT NULL,
	[MAND] nvarchar(10) NOT NULL,
	[DANHGIA] [int] NOT NULL,
	[BINHLUAN] [nvarchar](1000) NULL,
PRIMARY KEY CLUSTERED 
(
	[MASP] ASC,
	[MAND] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[DONHANG](
	[MADH] nvarchar(10) NOT NULL,
	[MAND] nvarchar(10) NOT NULL,
	[NGAYLAP] [smalldatetime] NOT NULL,
	[GIATRI] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[MADH] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[NGUOIDUNG](
	[MAND] nvarchar(10) NOT NULL,
	[QUYEN] nvarchar(10) NOT NULL,
	[TENND] [nvarchar](100) NULL,
	[TENDN] [nvarchar](100) NOT NULL,
	[PASS] [nvarchar](100) NOT NULL,
	[SDT] [nvarchar](20) NULL,
	[EMAIL] [nvarchar](100) NULL,
PRIMARY KEY CLUSTERED 
(
	[MAND] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO



CREATE TABLE [dbo].[SANPHAM](
	[MASP] nvarchar(10) NOT NULL,
	[TENSP] [nvarchar](100) NOT NULL,
	[SOLUONG] [int] DEFAULT ((0)),
	[DANHGIA] [int] DEFAULT ((5)),
	[DONGIA] [int] NOT NULL,
	[NAMSX] [int] NOT NULL,
	[HANGSX] [NVARchar](100) NOT NULL,
	[GIOITINH] [NVARCHAR](10) NOT NULL,
	[MOTA] [nvarchar](1000) NULL,
	[HINH] [nvarchar](100) not NULL
PRIMARY KEY CLUSTERED 
(
	[MASP] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

-- CTDH
ALTER TABLE [dbo].[CHITIETDONHANG]  WITH CHECK ADD  CONSTRAINT [fk01_CTDH] FOREIGN KEY([MASP])
REFERENCES [dbo].[SANPHAM] ([MASP])
GO

ALTER TABLE [dbo].[CHITIETDONHANG]  WITH CHECK ADD  CONSTRAINT [fk02_CTDH] FOREIGN KEY([MADH])
REFERENCES [dbo].[DONHANG] ([MADH])
GO

--gh
ALTER TABLE [dbo].[CHITIETGIOHANG]  WITH CHECK ADD  CONSTRAINT [fk01_GH] FOREIGN KEY([MASP])
REFERENCES [dbo].[SANPHAM] ([MASP])
GO

ALTER TABLE [dbo].[CHITIETGIOHANG]  WITH CHECK ADD  CONSTRAINT [fk02_GH] FOREIGN KEY([MAND])
REFERENCES [dbo].[NGUOIDUNG] ([MAND])
GO

--DG
ALTER TABLE [dbo].[DANHGIA]  WITH CHECK ADD  CONSTRAINT [fk01_DG] FOREIGN KEY([MASP])
REFERENCES [dbo].[SANPHAM] ([MASP])
GO

ALTER TABLE [dbo].[DANHGIA]  WITH CHECK ADD  CONSTRAINT [fk02_DG] FOREIGN KEY([MAND])
REFERENCES [dbo].[NGUOIDUNG] ([MAND])
GO

--DH
ALTER TABLE [dbo].[DONHANG]  WITH CHECK ADD  CONSTRAINT [fk01_DH] FOREIGN KEY([MAND])
REFERENCES [dbo].[NGUOIDUNG] ([MAND])
GO





----BOR
CREATE TABLE [dbo].[PHANQUYEN](
	[MAPQ] nvarchar(10) NOT NULL,
	[TENPQ] [nvarchar](20) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[MAPQ] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
--ND
ALTER TABLE [dbo].[NGUOIDUNG]  WITH CHECK ADD  CONSTRAINT [fk01_ND] FOREIGN KEY([MAPQ])
REFERENCES [dbo].[PHANQUYEN] ([MAPQ])
GO

set dateformat dmy
go